<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Home</title>
	<script defer type="module" src="./assets/js/app.js"></script>
</head>

<body>

	<div class="container mainContainer col-xl-8 col-lg-10 col-md-12 col-sm-12">
	
		<header class="sticky-top" id="header"></header>
		<div class="main2" id="hero"></div>
		
		<div class="header-container">
			<h1 id="header-title" class="header-title"></h1>
		</div>
		
		<main id="main" class="container-fluid">
			<section id="blog">
			<div id="blogContainer" class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-2 row-cols-xl-3 g-3"></div>
			</section>    
		</main>

		<footer id="footer"></footer>

	</div>


	<script type="module">
		import { getArtists } from "./db/artists_db.js";
		import { getNews } from "./db/news_db.js";
		import { getNewsCardComponent } from "./components/blog/news_card.js";
		import { setPageTitle } from "./assets/js/utils.js";

		setPageTitle("Latest news");


		const blogContainer = document.getElementById("blogContainer");

		const artists = getArtists();
		const news = getNews();
		// Recorremos las notícias
		news.forEach((newElement, index) => {
			
			// Buscamos el artista de la notícia
			const artist = artists.find(artist => artist.id === newElement.artistId);

			const newsCardComponent = getNewsCardComponent({
			id: newElement.id,
			image: artist.images[0],
			date: newElement.date,
			location: newElement.location,
			title: newElement.title,
			extract: newElement.extract
			})
			
			//if(index >= 3) return;

			blogContainer.innerHTML += newsCardComponent;

		});

	</script>
</body>
</html>